<!DOCTYPE html>
<html lang="zh-CN">

  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta name="author" content="zellux">
    
    <meta name="keywords" content="">
    

    <title> 《Ruby Programming Language》 Reading Notes &middot; Aiur · Zellux 的博客 </title>
    <link rel="stylesheet" href="https://use.typekit.net/vuh8sti.css">

    <script src="/js/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="/css/jquery.fancybox.min.css" />
    <script src="/js/jquery-3.0.47.fancybox.min.js"></script>

    
    
    <link rel="stylesheet" href="https://blog.yxwang.me/css/slim.min.d986684ab585867681cde1f1f3d183ba8c773d00b5a9c2444ad3f76e90805b0b.css">
    
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro' rel='stylesheet' type='text/css'>
    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.ico">

    
    <link href="" rel="alternate" type="application/rss+xml" title="Aiur · Zellux 的博客" />
    
<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/blog.yxwang.me\/"
    },
    "articleSection" : "notes",
    "name" : "《Ruby Programming Language》 Reading Notes",
    "headline" : "《Ruby Programming Language》 Reading Notes",
    "description" : "Chapter 3 Datatypes and Objects \u0026#34;360 degrees=#{2*Math::PI}radians\u0026#34; # \u0026#34;360 degrees=6.28318530717959 radians\u0026#34; $salutation = \u0026#39;hello\u0026#39; # Define a global variable \u0026#34;#$salutationworld\u0026#34; # Use it in a double-quoted string \u0026#34;My phone #: 555-1234\u0026#34; # No escape needed \u0026#34;Use \\#{ to interpolate expressions\u0026#34; # Escape #{ with backslash Ruby will create a new object for each iteration. For efficiency, you should avoid using literals within loops.\nThe \u0026laquo; operator appends its second operand to its first.",
    "inLanguage" : "en-US",
    "author" : "zellux",
    "creator" : "zellux",
    "publisher": "zellux",
    "accountablePerson" : "",
    "copyrightHolder" : "",
    "copyrightYear" : "0001",
    "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
    "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
    "url" : "https:\/\/blog.yxwang.me\/notes\/programming\/ruby-programming-language\/",
    "wordCount" : "1010",
    "keywords" : [ "Blog" ]
}
</script>

  </head>

  <body>
    <nav class="nav">
  <div class="nav-container">
    <span class="site-title">
      <a href="https://blog.yxwang.me/">Aiur · Zellux 的博客</a>
    </span>
    
    <div class="nav-list">
      
      <span class="nav-item"><a href="/about">About</a></span>
      
      <span class="nav-item"><a href="/archive">Archive</a></span>
      
      <span class="nav-item"><a href="/notes">Notes</a></span>
      
    </div>
  </div>
</nav>

    <div class="container lang-en">


<div class="content">
  <div class="posts">
    <div class="post">
      <h1 class="post-title"><a href="https://blog.yxwang.me/notes/programming/ruby-programming-language/">《Ruby Programming Language》 Reading Notes</a></h1>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#chapter-3-datatypes-and-objects">Chapter 3 Datatypes and Objects</a></li>
    <li><a href="#chapter-5-statements-and-control-structures">Chapter 5 Statements and Control Structures</a></li>
    <li><a href="#chapter-6-methods-procs-lambdas-and-closures">Chapter 6 Methods, Procs, Lambdas, and Closures</a></li>
    <li><a href="#chapter-7-classes-and-modules">Chapter 7 Classes and Modules</a></li>
  </ul>
</nav>
      <div class="post-content">
        <h2 id="chapter-3-datatypes-and-objects">Chapter 3 Datatypes and Objects</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#e6db74">&#34;360 degrees=</span><span style="color:#e6db74">#{</span><span style="color:#ae81ff">2</span><span style="color:#f92672">*</span><span style="color:#66d9ef">Math</span><span style="color:#f92672">::</span><span style="color:#66d9ef">PI</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> radians&#34;</span> <span style="color:#75715e"># &#34;360 degrees=6.28318530717959 radians&#34;</span>
$salutation <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hello&#39;</span> <span style="color:#75715e"># Define a global variable</span>
<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">#$salutation</span><span style="color:#e6db74"> world&#34;</span> <span style="color:#75715e"># Use it in a double-quoted string</span>
<span style="color:#e6db74">&#34;My phone #: 555-1234&#34;</span> <span style="color:#75715e"># No escape needed</span>
<span style="color:#e6db74">&#34;Use </span><span style="color:#ae81ff">\#</span><span style="color:#e6db74">{ to interpolate expressions&#34;</span> <span style="color:#75715e"># Escape #{ with backslash</span>
</code></pre></div><p>Ruby will create a new object for each iteration. For efficiency, you should avoid using literals within loops.</p>
<p>The &laquo; operator appends its second operand to its first. This operator is very different from +; it alters the lefthand operand rather than creating and returning a new object.</p>
<p>To alter individual characters of a string, simply use brackets on the lefthand ide of an assignment expression.</p>
<p>In general, Symbol objects work more efficiently as hash keys than strings do.</p>
<p>Two-dot range: the range is inclusive and the end value is part of the range</p>
<p>Three-dot range: the range is exclusive and the end value is not part of the range</p>
<p>You can convert a String to a Symbol using the intern or to_sym methods.</p>
<p>Ruby’s convention of == and equal() is just about the opposite of Java’s.</p>
<p>Any object may be frozen by calling its freeze method. A frozen object becomes immutable.</p>
<h2 id="chapter-5-statements-and-control-structures">Chapter 5 Statements and Control Structures</h2>
<p>The if modifier has very low precedence and binds more loosely than the assignment operator.</p>
<p>The following two lines of code are different:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">y <span style="color:#f92672">=</span> x<span style="color:#f92672">.</span>invert <span style="color:#66d9ef">if</span> x<span style="color:#f92672">.</span>respond_to? <span style="color:#e6db74">:invert</span>
y <span style="color:#f92672">=</span> (x<span style="color:#f92672">.</span>invert <span style="color:#66d9ef">if</span> x<span style="color:#f92672">.</span>respond_to? <span style="color:#e6db74">:invert</span>)
</code></pre></div><p>The inject method behaves like foldr in Haskell and reduce in Python.</p>
<p>A fundamental issue is deciding which party controls the iteration, the iterator or the client that uses the iterator. When the client controls the iteration, the iterator is called an external iterator, and when the iterator controls it, the iterator is an internal iterator.</p>
<p>If you want to return more than one value in a block, you can use next instead of return.</p>
<p>Most Ruby programmers omit return when it is not necessary. Instead of writing <code>return x</code> as the last line of a method, they would simply write x.</p>
<p>When next is used within a block, it causes the block to exit immediately, returning control to the iterator method, which may then begin a new iteration by invoking the block again.</p>
<p>Compute factorial of x, or use 0 if the method raises an exception: <code>y = factorial(x) rescue 0</code></p>
<p>Fibers can be thought of as independent paths of execution within a single thread of execution. Unlike threads, however, there is no scheduler to transfer control among fibers; fibers must explicitly schedule themselves with transfer.</p>
<h2 id="chapter-6-methods-procs-lambdas-and-closures">Chapter 6 Methods, Procs, Lambdas, and Closures</h2>
<p>An important feature of procs and lambdas is that they are closures: they retain access to the local variables that were in scope when they were defined, even when the proc or lambda is invoked from a different scope.</p>
<p>Block arguments prefixed with ampersands must really be the last one. Because blocks are passed unusually in method invocations, named block arguments are different and do not interfere with array or hash parameters in which the brackets and braces have been omitted.</p>
<p>When &amp; is used before a Proc object in a method invocation, it treats the Proc as if it was an ordinary block following the invocation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">a, b <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span><span style="color:#f92672">]</span>, <span style="color:#f92672">[</span><span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span><span style="color:#f92672">]</span> <span style="color:#75715e"># Start with some data.</span>
summation <span style="color:#f92672">=</span> <span style="color:#66d9ef">Proc</span><span style="color:#f92672">.</span>new {<span style="color:#f92672">|</span>total,x<span style="color:#f92672">|</span> total<span style="color:#f92672">+</span>x } <span style="color:#75715e"># A Proc object for summations.</span>
sum <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span>inject(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">&amp;</span>summation) <span style="color:#75715e"># =&gt; 6</span>
sum <span style="color:#f92672">=</span> b<span style="color:#f92672">.</span>inject(sum, <span style="color:#f92672">&amp;</span>summation) <span style="color:#75715e"># =&gt; 15</span>
</code></pre></div><p>In Ruby 1.9, the Symbol class defines a to_proc method, allowing symbols to be prefixed with &amp; and passed to iterators. When a symbol is passed like this, it is assumed to be the name of a method.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">words <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;and&#39;</span>, <span style="color:#e6db74">&#39;but&#39;</span>, <span style="color:#e6db74">&#39;car&#39;</span><span style="color:#f92672">]</span> <span style="color:#75715e"># An array of words</span>
uppercase <span style="color:#f92672">=</span> words<span style="color:#f92672">.</span>map <span style="color:#f92672">&amp;</span><span style="color:#e6db74">:upcase</span> <span style="color:#75715e"># Convert to uppercase with String.upcase</span>
upper <span style="color:#f92672">=</span> words<span style="color:#f92672">.</span>map {<span style="color:#f92672">|</span>w<span style="color:#f92672">|</span> w<span style="color:#f92672">.</span>upcase } <span style="color:#75715e"># This is the equivalent code with a block</span>
</code></pre></div><p>Ruby 1.9 syntax allows lambdas to be declared with argument defaults, just as methods can be:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">zoom <span style="color:#f92672">=</span> <span style="color:#f92672">-&gt;</span>(x,y,factor<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>) { <span style="color:#f92672">[</span>x<span style="color:#f92672">*</span>factor, y<span style="color:#f92672">*</span>factor<span style="color:#f92672">]</span> }
</code></pre></div><p>The Proc class also defines the array access operator to work the same way as call.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">f <span style="color:#f92672">=</span> <span style="color:#66d9ef">Proc</span><span style="color:#f92672">.</span>new {<span style="color:#f92672">|</span>x,y<span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span>x <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span>y) }
z <span style="color:#f92672">=</span> f<span style="color:#f92672">[</span>x,y<span style="color:#f92672">]</span>
</code></pre></div><p>Ruby 1.9 offers an additional way to invoke a Proc object; as an alternative to square brackets, you can use parentheses prefixed with a period:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">z <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>(x,y)
</code></pre></div><h2 id="chapter-7-classes-and-modules">Chapter 7 Classes and Modules</h2>
<p>When the initialize method is invoked, self holds an instance of the Point class. But the code outside of that method is executed as part of the definition of the Point class.</p>
<p>If we want the expression <code>2*p</code> to return the same result as <code>p*2</code>, we can define a coerce method.</p>
<p>A protected method defined by a class C may be invoked on an object o by a method in an object p if and only if the classes of o and p are both subclasses of, or equal to, the class C.</p>
<p>To invoke the private utility method defined in the previous code, you can use the send method, or you can use instance_eval to evaluate a block in the context of the object.</p>
<p>Class methods can also be defined using self instead of the class name.</p>
<p>Class variables have names that begin with <code>@@</code>.</p>
<p>Remember that public, private, and protected apply only to methods in Ruby. Instance and class variables are encapsulated and effectively private, and constants are effectively public.</p>
<p>The upshot is that, in Ruby, you should only subclass when you are familiar with the implementation of the superclass. If you only want to depend on the public API of a class and not on its implementation, then you should extend the functionality of the class by encapsulating and delegating to it, not by inheriting from it.</p>
<p>Class#new, is an instance method, and the other, Class::new, is a class method.</p>
<p>Class is a subclass of Module. This means that all classes are modules, but not all modules are classes. Classes can be used as namespaces, just as modules can. Classes cannot, however, be used as mixins.</p>

      </div>
          <div class="cc-license">
      本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.zh">知识共享署名-非商业性使用 3.0 版本许可协议</a>进行许可，欢迎转载，演绎，但是必须保留本文的署名 <a href="https://blog.yxwang.me/notes/programming/ruby-programming-language/">zellux</a>（包含链接），且不得用于商业目的。
    </div>

    </div>
    <div class="pagination">
      <a class="btn previous " href="https://blog.yxwang.me/notes/programming/programming-scala/"> Prev</a>  
      <a class="btn next " href="https://blog.yxwang.me/notes/languages/introduction-to-spanish/"> Next</a> 
    </div>
  </div>
</div>


<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
  this.page.url = "https://blog.yxwang.me/notes/programming/ruby-programming-language/";
  
  };
  (function() {
  var d = document, s = d.createElement('script');
  s.src = '//aiur-zellux.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



<div class="footer">
  
  <p>Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zhe/hugo-theme-slim">Slim theme</a>.
  
      Follow me on <a href="https://twitter.com/zellux">Twitter</a>.
      </p>
  </p>
  
</div>

                   
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
    Macros: {
      argmax: "\\operatorname*{argmax}",
      argmin: "\\operatorname*{argmin}"
    }
  },
  jax: ["input/TeX","output/CommonHTML"]
});
</script>

<script type="text/javascript" async
  src="/MathJax-2.7.5/MathJax.js?config=TeX-AMS_CHTML">
</script>

</script>

<script src="https://blog.yxwang.me/js/slim.min.aef36e671f72c9042139aae327dbe693b7ebaa67fd56f30dad4c985a91ba9294.js"></script>


<link rel="stylesheet" href="https://blog.yxwang.me/css/solarized-light.min.5499f6bc45da0c78f070be4f720fd28b19af75306b569b77837d57c3cf819430.css" />
<script src="/js/highlight.pack.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>

</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-25551121-1', 'auto');
ga('send', 'pageview');

</script>


</body>

</html>

